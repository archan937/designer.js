!function(){function a(a){return a.replace(/^\s+/g,"")}function b(a){return a.replace(/\s+$/g,"")}function c(a,b){var c,d={};for(c in a)c!==b&&(d[c]=a[c]);if(b in a)for(c in a[b])d[c]=a[b][c];return d}function d(d,g,h,i){function j(){function c(a){var b="",c=function(c){var d=b+c.toLowerCase();b=d.length<=a.length?d:d.substr(d.length-a.length,a.length)},d=function(){return b.indexOf(a)===-1};return{add:c,doesNotMatch:d}}return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.newlines=0,this.indent_content=l,this.indent_body_inner_html=m,this.indent_head_inner_html=n,this.Utils={whitespace:"\n\r\t ".split(""),single_token:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","?php","basefont","isindex"],extra_liners:D,in_array:function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return!0;return!1}},this.is_whitespace=function(a){for(var b=0;b<a.length;b++)if(!this.Utils.in_array(a.charAt(b),this.Utils.whitespace))return!1;return!0},this.traverse_whitespace=function(){var a="";if(a=this.input.charAt(this.pos),this.Utils.in_array(a,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(a,this.Utils.whitespace);)u&&"\n"===a&&this.newlines<=v&&(this.newlines+=1),this.pos++,a=this.input.charAt(this.pos);return!0}return!1},this.space_or_wrap=function(a){return this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,a),this.print_indentation(a),!0):(this.line_char_count++,a.push(" "),!1)},this.get_content=function(){for(var a="",b=[],c=0;"<"!==this.input.charAt(this.pos)||2===c;){if(this.pos>=this.input.length)return b.length?b.join(""):["","TK_EOF"];if(this.traverse_whitespace())this.space_or_wrap(b);else{if(a=this.input.charAt(this.pos),w){if("{"===a?c+=1:c<2&&(c=0),"}"===a&&c>0&&0===c--)break;var d=this.input.substr(this.pos,3);if("{{#"===d||"{{/"===d)break;if("{{!"===d)return[this.get_tag(),"TK_TAG_HANDLEBARS_COMMENT"];if("{{"===this.input.substr(this.pos,2)&&"{{else}}"===this.get_tag(!0))break}this.pos++,this.line_char_count++,b.push(a)}}return b.length?b.join(""):""},this.get_contents_to=function(a){if(this.pos===this.input.length)return["","TK_EOF"];var b="",c=new RegExp("</"+a+"\\s*>","igm");c.lastIndex=this.pos;var d=c.exec(this.input),e=d?d.index:this.input.length;return this.pos<e&&(b=this.input.substring(this.pos,e),this.pos=e),b},this.record_tag=function(a){this.tags[a+"count"]?(this.tags[a+"count"]++,this.tags[a+this.tags[a+"count"]]=this.indent_level):(this.tags[a+"count"]=1,this.tags[a+this.tags[a+"count"]]=this.indent_level),this.tags[a+this.tags[a+"count"]+"parent"]=this.tags.parent,this.tags.parent=a+this.tags[a+"count"]},this.retrieve_tag=function(a){if(this.tags[a+"count"]){for(var b=this.tags.parent;b&&a+this.tags[a+"count"]!==b;)b=this.tags[b+"parent"];b&&(this.indent_level=this.tags[a+this.tags[a+"count"]],this.tags.parent=this.tags[b+"parent"]),delete this.tags[a+this.tags[a+"count"]+"parent"],delete this.tags[a+this.tags[a+"count"]],1===this.tags[a+"count"]?delete this.tags[a+"count"]:this.tags[a+"count"]--}},this.indent_to_tag=function(a){if(this.tags[a+"count"]){for(var b=this.tags.parent;b&&a+this.tags[a+"count"]!==b;)b=this.tags[b+"parent"];b&&(this.indent_level=this.tags[a+this.tags[a+"count"]])}},this.get_tag=function(a){var b,c,d,e,f="",g=[],h="",i=!1,j=!0,k=!1,l=this.pos,m=this.line_char_count,n=!1;a=void 0!==a&&a;do{if(this.pos>=this.input.length)return a&&(this.pos=l,this.line_char_count=m),g.length?g.join(""):["","TK_EOF"];if(f=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(f,this.Utils.whitespace))i=!0;else{if("'"!==f&&'"'!==f||(f+=this.get_unformatted(f),i=!0),"="===f&&(i=!1),e=this.input.substr(this.pos-1),!A||!k||n||">"!==f&&"/"!==f||e.match(/^\/?\s*>/)&&(i=!1,n=!0,this.print_newline(!1,g),this.print_indentation(g)),g.length&&"="!==g[g.length-1]&&">"!==f&&i){var o=this.space_or_wrap(g),q=o&&"/"!==f&&!z;if(i=!1,z&&"/"!==f){var r=!1;if(A&&j){var u=null!==e.match(/^\S*(="([^"]|\\")*")?\s*\/?\s*>/);r=!u}j&&!r||(this.print_newline(!1,g),this.print_indentation(g),q=!0)}if(q){k=!0;var v=y;B&&(v=g.indexOf(" ")+1);for(var x=0;x<v;x++)g.push(p)}if(j)for(var C=0;C<g.length;C++)if(" "===g[C]){j=!1;break}}if(w&&"<"===d&&f+this.input.charAt(this.pos)==="{{"&&(f+=this.get_unformatted("}}"),g.length&&" "!==g[g.length-1]&&"<"!==g[g.length-1]&&(f=" "+f),i=!0),"<"!==f||d||(b=this.pos-1,d="<"),w&&!d&&g.length>=2&&"{"===g[g.length-1]&&"{"===g[g.length-2]&&(b="#"===f||"/"===f||"!"===f?this.pos-3:this.pos-2,d="{"),this.line_char_count++,g.push(f),g[1]&&("!"===g[1]||"?"===g[1]||"%"===g[1])){g=[this.get_comment(b)];break}if(w&&g[1]&&"{"===g[1]&&g[2]&&"!"===g[2]){g=[this.get_comment(b)];break}if(w&&"{"===d&&g.length>2&&"}"===g[g.length-2]&&"}"===g[g.length-1])break}}while(">"!==f);var D,E,F=g.join("");D=F.indexOf("\n")!==-1?F.indexOf("\n"):F.indexOf(" ")!==-1?F.indexOf(" "):"{"===F.charAt(0)?F.indexOf("}"):F.indexOf(">"),E="<"!==F.charAt(0)&&w?"#"===F.charAt(2)?3:2:1;var G=F.substring(E,D).toLowerCase();return"/"===F.charAt(F.length-2)||this.Utils.in_array(G,this.Utils.single_token)?a||(this.tag_type="SINGLE"):w&&"{"===F.charAt(0)&&"else"===G?a||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):this.is_unformatted(G,s)||this.is_unformatted(G,t)?(h=this.get_unformatted("</"+G+">",F),g.push(h),c=this.pos-1,this.tag_type="SINGLE"):"script"===G&&(F.search("type")===-1||F.search("type")>-1&&F.search(/\b(text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect)/)>-1)?a||(this.record_tag(G),this.tag_type="SCRIPT"):"style"===G&&(F.search("type")===-1||F.search("type")>-1&&F.search("text/css")>-1)?a||(this.record_tag(G),this.tag_type="STYLE"):"!"===G.charAt(0)?a||(this.tag_type="SINGLE",this.traverse_whitespace()):a||("/"===G.charAt(0)?(this.retrieve_tag(G.substring(1)),this.tag_type="END"):(this.record_tag(G),"html"!==G.toLowerCase()&&(this.indent_content=!0),this.tag_type="START"),this.traverse_whitespace()&&this.space_or_wrap(g),this.Utils.in_array(G,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!==this.output[this.output.length-2]&&this.print_newline(!0,this.output))),a&&(this.pos=l,this.line_char_count=m),g.join("")},this.get_comment=function(a){var b="",c=">",d=!1;this.pos=a;var e=this.input.charAt(this.pos);for(this.pos++;this.pos<=this.input.length&&(b+=e,b.charAt(b.length-1)!==c.charAt(c.length-1)||b.indexOf(c)===-1);)!d&&b.length<10&&(0===b.indexOf("<![if")?(c="<![endif]>",d=!0):0===b.indexOf("<![cdata[")?(c="]]>",d=!0):0===b.indexOf("<![")?(c="]>",d=!0):0===b.indexOf("<!--")?(c="-->",d=!0):0===b.indexOf("{{!--")?(c="--}}",d=!0):0===b.indexOf("{{!")?5===b.length&&b.indexOf("{{!--")===-1&&(c="}}",d=!0):0===b.indexOf("<?")?(c="?>",d=!0):0===b.indexOf("<%")&&(c="%>",d=!0)),e=this.input.charAt(this.pos),this.pos++;return b},this.get_unformatted=function(a,b){if(b&&b.toLowerCase().indexOf(a)!==-1)return"";var d="",e="",f=!0,g=c(a);do{if(this.pos>=this.input.length)return e;if(d=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(d,this.Utils.whitespace)){if(!f){this.line_char_count--;continue}if("\n"===d||"\r"===d){e+="\n",this.line_char_count=0;continue}}e+=d,g.add(d),this.line_char_count++,f=!0,w&&"{"===d&&e.length&&"{"===e.charAt(e.length-2)&&(e+=this.get_unformatted("}}"))}while(g.doesNotMatch());return e},this.get_token=function(){var a;if("TK_TAG_SCRIPT"===this.last_token||"TK_TAG_STYLE"===this.last_token){var b=this.last_token.substr(7);return a=this.get_contents_to(b),"string"!=typeof a?a:[a,"TK_"+b]}if("CONTENT"===this.current_mode)return a=this.get_content(),"string"!=typeof a?a:[a,"TK_CONTENT"];if("TAG"===this.current_mode){if(a=this.get_tag(),"string"!=typeof a)return a;var c="TK_TAG_"+this.tag_type;return[a,c]}},this.get_full_indent=function(a){return a=this.indent_level+a||0,a<1?"":Array(a+1).join(this.indent_string)},this.is_unformatted=function(a,b){if(!this.Utils.in_array(a,b))return!1;if("a"!==a.toLowerCase()||!this.Utils.in_array("a",b))return!0;var c=this.get_tag(!0),d=(c||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!(d&&!this.Utils.in_array(d,b))},this.printer=function(c,d,e,f,g){this.input=c||"",this.input=this.input.replace(/\r\n|[\r\u2028\u2029]/g,"\n"),this.output=[],this.indent_character=d,this.indent_string="",this.indent_size=e,this.brace_style=g,this.indent_level=0,this.wrap_line_length=f,this.line_char_count=0;for(var h=0;h<this.indent_size;h++)this.indent_string+=this.indent_character;this.print_newline=function(a,c){this.line_char_count=0,c&&c.length&&(a||"\n"!==c[c.length-1])&&("\n"!==c[c.length-1]&&(c[c.length-1]=b(c[c.length-1])),c.push("\n"))},this.print_indentation=function(a){for(var b=0;b<this.indent_level;b++)a.push(this.indent_string),this.line_char_count+=this.indent_string.length},this.print_token=function(b){this.is_whitespace(b)&&!this.output.length||((b||""!==b)&&this.output.length&&"\n"===this.output[this.output.length-1]&&(this.print_indentation(this.output),b=a(b)),this.print_token_raw(b))},this.print_token_raw=function(a){this.newlines>0&&(a=b(a)),a&&""!==a&&(a.length>1&&"\n"===a.charAt(a.length-1)?(this.output.push(a.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(a));for(var c=0;c<this.newlines;c++)this.print_newline(c>0,this.output);this.newlines=0},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;for(g=g||{},g=c(g,"html"),void 0!==g.wrap_line_length&&0!==parseInt(g.wrap_line_length,10)||void 0===g.max_char||0===parseInt(g.max_char,10)||(g.wrap_line_length=g.max_char),l=void 0!==g.indent_inner_html&&g.indent_inner_html,m=void 0===g.indent_body_inner_html||g.indent_body_inner_html,n=void 0===g.indent_head_inner_html||g.indent_head_inner_html,o=void 0===g.indent_size?4:parseInt(g.indent_size,10),p=void 0===g.indent_char?" ":g.indent_char,r=void 0===g.brace_style?"collapse":g.brace_style,q=0===parseInt(g.wrap_line_length,10)?32786:parseInt(g.wrap_line_length||250,10),s=g.unformatted||["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","address","big","dt","ins","strike","tt"],t=g.content_unformatted||["pre"],u=void 0===g.preserve_newlines||g.preserve_newlines,v=u?isNaN(parseInt(g.max_preserve_newlines,10))?32786:parseInt(g.max_preserve_newlines,10):0,w=void 0!==g.indent_handlebars&&g.indent_handlebars,x=void 0===g.wrap_attributes?"auto":g.wrap_attributes,y=isNaN(parseInt(g.wrap_attributes_indent_size,10))?o:parseInt(g.wrap_attributes_indent_size,10),z="force"===x.substr(0,"force".length),A="force-expand-multiline"===x,B="force-aligned"===x,C=void 0!==g.end_with_newline&&g.end_with_newline,D="object"==typeof g.extra_liners&&g.extra_liners?g.extra_liners.concat():"string"==typeof g.extra_liners?g.extra_liners.split(","):"head,body,/html".split(","),E=g.eol?g.eol:"auto",g.indent_with_tabs&&(p="\t",o=1),"auto"===E&&(E="\n",d&&e.test(d||"")&&(E=d.match(e)[0])),E=E.replace(/\\r/,"\r").replace(/\\n/,"\n"),d=d.replace(f,"\n"),k=new j,k.printer(d,p,o,q,r);;){var F=k.get_token();if(k.token_text=F[0],k.token_type=F[1],"TK_EOF"===k.token_type)break;switch(k.token_type){case"TK_TAG_START":k.print_newline(!1,k.output),k.print_token(k.token_text),k.indent_content&&(!k.indent_body_inner_html&&k.token_text.match(/<body(?:.*)>/)||!k.indent_head_inner_html&&k.token_text.match(/<head(?:.*)>/)||k.indent(),k.indent_content=!1),k.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":k.print_newline(!1,k.output),k.print_token(k.token_text),k.current_mode="CONTENT";break;case"TK_TAG_END":if("TK_CONTENT"===k.last_token&&""===k.last_text){var G=(k.token_text.match(/\w+/)||[])[0],H=null;k.output.length&&(H=k.output[k.output.length-1].match(/(?:<|{{#)\s*(\w+)/)),(null===H||H[1]!==G&&!k.Utils.in_array(H[1],s))&&k.print_newline(!1,k.output)}k.print_token(k.token_text),k.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var I=k.token_text.match(/^\s*<([a-z-]+)/i);I&&k.Utils.in_array(I[1],s)||k.print_newline(!1,k.output),k.print_token(k.token_text),k.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":for(var J=!1,K=k.output.length-1;K>=0&&"\n"!==k.output[K];K--)if(k.output[K].match(/{{#if/)){J=!0;break}J||k.print_newline(!1,k.output),k.print_token(k.token_text),k.indent_content&&(k.indent(),k.indent_content=!1),k.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_COMMENT":k.print_token(k.token_text),k.current_mode="TAG";break;case"TK_CONTENT":k.print_token(k.token_text),k.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==k.token_text){k.print_newline(!1,k.output);var L,M=k.token_text,N=1;"TK_SCRIPT"===k.token_type?L="function"==typeof h&&h:"TK_STYLE"===k.token_type&&(L="function"==typeof i&&i),"keep"===g.indent_scripts?N=0:"separate"===g.indent_scripts&&(N=-k.indent_level);var O=k.get_full_indent(N);if(L){var P=function(){this.eol="\n"};P.prototype=g;var Q=new P;M=L(M.replace(/^\s*/,O),Q)}else{var R=M.match(/^\s*/)[0],S=R.match(/[^\n\r]*$/)[0].split(k.indent_string).length-1,T=k.get_full_indent(N-S);M=M.replace(/^\s*/,O).replace(/\r\n|\r|\n/g,"\n"+T).replace(/\s+$/,"")}M&&(k.print_token_raw(M),k.print_newline(!0,k.output))}k.current_mode="TAG";break;default:""!==k.token_text&&k.print_token(k.token_text)}k.last_token=k.token_type,k.last_text=k.token_text}var U=k.output.join("").replace(/[\r\n\t ]+$/,"");return C&&(U+="\n"),"\n"!==E&&(U=U.replace(/[\n]/g,E)),U}var e=/\r\n|[\n\r\u2028\u2029]/,f=new RegExp(e.source,"g");if("function"==typeof define&&define.amd)define(["require","./beautify","./beautify-css"],function(a){var b=a("./beautify"),c=a("./beautify-css");return{html_beautify:function(a,e){return d(a,e,b.js_beautify,c.css_beautify)}}});else if("undefined"!=typeof exports){var g=require("./beautify.js"),h=require("./beautify-css.js");exports.html_beautify=function(a,b){return d(a,b,g.js_beautify,h.css_beautify)}}else"undefined"!=typeof window?window.html_beautify=function(a,b){return d(a,b,window.js_beautify,window.css_beautify)}:"undefined"!=typeof global&&(global.html_beautify=function(a,b){return d(a,b,global.js_beautify,global.css_beautify)})}();